# roborace-laps-counter-java-server

roborace-laps-counter - это система, предназначенная для подсчета кругов автономных гоночных роботов.
Система включает в себя следующие компоненты: сервер, рамки, приемники и веб интерфейс.
 
* Рамка - устройство, которое излучает инфракрасный код. На трассу необходимо установить не менее 3-х рамок для того чтобы 
иметь возможность различать направления движения роботов. Каждая рамка излучает свой уникальный код.
* Приемник - устройство, которое крепится на верхней части робота. Оно считывает инфракрасный код в тот момент когда робот проезжает под рамкой и отправляет на сервер код рамки и код робота. [Приемник и рамка](https://github.com/roborace-org/roborace-laps-counter)
* Веб-интерфейс - визуальная представление системы на котором отображаются имена роботов, позиция, набранные круги и затраченное время на прохождения круга. В версии судьи доступны кнопки для старта и финиша заезда, кнопка увеличения и уменьшения кругов которых завершил робот. [Веб интерфейс](https://github.com/roborace-org/roborace-laps-counter-web)
* Сервер - программа, которая принимает команды от веб-интерфейса судьи и коды рамок от роботов. Сервер засчитывает круг если робот проехал под всеми рамками. При этом, он также оповещает веб-интерфейс для обновления информации на экране.

## Установка на Raspberry pi / Ubuntu Linux

Необходимо установить openjdk-8 на сервер и добавить линукс сервис: 
> sudo apt update
> sudo apt upgrade
> sudo apt install -y openjdk-8-jre
> sudo make service-install

Далее необходимо скачать jar-файл и загрузить его в каталог /app/roborace-laps-counter/roborace-laps-counter.jar либо собрать jar-файл самостоятельно

Для того чтобы запустить сервис:
> sudo service roborace-laps-counter start

### Сборка jar-файла

> sudo apt install -y openjdk-8-jdk maven
> make build

### Обновление jar-файла в сервисе

> service roborace-laps-counter stop
> make service-update-jar
> service roborace-laps-counter start
